{
  "query": "CREATE TABLE `channelMembers` (\n\t`id` varchar(36) NOT NULL,\n\t`channelId` varchar(36) NOT NULL,\n\t`userId` varchar(36) NOT NULL,\n\t`role` enum('admin','member') NOT NULL DEFAULT 'member',\n\t`joinedAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastReadAt` timestamp,\n\tCONSTRAINT `channelMembers_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `channel_user_unique` UNIQUE(`channelId`,`userId`)\n);\n\nCREATE TABLE `channels` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`description` text,\n\t`type` enum('public','private') NOT NULL DEFAULT 'public',\n\t`createdBy` varchar(36) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`archivedAt` timestamp,\n\tCONSTRAINT `channels_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `directMessages` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`senderId` varchar(36) NOT NULL,\n\t`recipientId` varchar(36) NOT NULL,\n\t`content` text NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`readAt` timestamp,\n\t`deletedAt` timestamp,\n\tCONSTRAINT `directMessages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `messageReactions` (\n\t`id` varchar(36) NOT NULL,\n\t`messageId` varchar(36) NOT NULL,\n\t`userId` varchar(36) NOT NULL,\n\t`emoji` varchar(10) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `messageReactions_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `message_user_emoji_unique` UNIQUE(`messageId`,`userId`,`emoji`)\n);\n\nCREATE TABLE `messages` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`channelId` varchar(36),\n\t`userId` varchar(36) NOT NULL,\n\t`content` text NOT NULL,\n\t`threadId` varchar(36),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp,\n\t`deletedAt` timestamp,\n\tCONSTRAINT `messages_id` PRIMARY KEY(`id`)\n);\n\nCREATE INDEX `user_idx` ON `channelMembers` (`userId`);\nCREATE INDEX `tenant_idx` ON `channels` (`tenantId`);\nCREATE INDEX `tenant_name_idx` ON `channels` (`tenantId`,`name`);\nCREATE INDEX `tenant_sender_recipient_idx` ON `directMessages` (`tenantId`,`senderId`,`recipientId`);\nCREATE INDEX `tenant_recipient_idx` ON `directMessages` (`tenantId`,`recipientId`);\nCREATE INDEX `created_idx` ON `directMessages` (`createdAt`);\nCREATE INDEX `message_idx` ON `messageReactions` (`messageId`);\nCREATE INDEX `tenant_channel_idx` ON `messages` (`tenantId`,`channelId`);\nCREATE INDEX `channel_created_idx` ON `messages` (`channelId`,`createdAt`);\nCREATE INDEX `thread_idx` ON `messages` (`threadId`);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2QkRhwd4AVTLhHG.a0950ca1ba2f --database TQEsx2HByTQrcAiUBn2kww --execute CREATE TABLE `channelMembers` (\n\t`id` varchar(36) NOT NULL,\n\t`channelId` varchar(36) NOT NULL,\n\t`userId` varchar(36) NOT NULL,\n\t`role` enum('admin','member') NOT NULL DEFAULT 'member',\n\t`joinedAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastReadAt` timestamp,\n\tCONSTRAINT `channelMembers_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `channel_user_unique` UNIQUE(`channelId`,`userId`)\n);\n\nCREATE TABLE `channels` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`description` text,\n\t`type` enum('public','private') NOT NULL DEFAULT 'public',\n\t`createdBy` varchar(36) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`archivedAt` timestamp,\n\tCONSTRAINT `channels_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `directMessages` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`senderId` varchar(36) NOT NULL,\n\t`recipientId` varchar(36) NOT NULL,\n\t`content` text NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`readAt` timestamp,\n\t`deletedAt` timestamp,\n\tCONSTRAINT `directMessages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `messageReactions` (\n\t`id` varchar(36) NOT NULL,\n\t`messageId` varchar(36) NOT NULL,\n\t`userId` varchar(36) NOT NULL,\n\t`emoji` varchar(10) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `messageReactions_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `message_user_emoji_unique` UNIQUE(`messageId`,`userId`,`emoji`)\n);\n\nCREATE TABLE `messages` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`channelId` varchar(36),\n\t`userId` varchar(36) NOT NULL,\n\t`content` text NOT NULL,\n\t`threadId` varchar(36),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp,\n\t`deletedAt` timestamp,\n\tCONSTRAINT `messages_id` PRIMARY KEY(`id`)\n);\n\nCREATE INDEX `user_idx` ON `channelMembers` (`userId`);\nCREATE INDEX `tenant_idx` ON `channels` (`tenantId`);\nCREATE INDEX `tenant_name_idx` ON `channels` (`tenantId`,`name`);\nCREATE INDEX `tenant_sender_recipient_idx` ON `directMessages` (`tenantId`,`senderId`,`recipientId`);\nCREATE INDEX `tenant_recipient_idx` ON `directMessages` (`tenantId`,`recipientId`);\nCREATE INDEX `created_idx` ON `directMessages` (`createdAt`);\nCREATE INDEX `message_idx` ON `messageReactions` (`messageId`);\nCREATE INDEX `tenant_channel_idx` ON `messages` (`tenantId`,`channelId`);\nCREATE INDEX `channel_created_idx` ON `messages` (`channelId`,`createdAt`);\nCREATE INDEX `thread_idx` ON `messages` (`threadId`);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 10538
}